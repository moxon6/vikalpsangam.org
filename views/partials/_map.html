<div id="large-map">
    <div class="loading-overlay" v-if="!coordinates.length">
        <div class="spinner-border" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>

    <l-map ref="map" :center="center" :zoom="zoom">
        <l-tile-layer :url="url" :attribution="attribution"></l-tile-layer>
        <l-marker :key="coordinate.id" :icon="getIcon(coordinate)" v-for="coordinate in visibleMarkers"
            :lat-lng="[coordinate.latitude, coordinate.longitude]">
            <l-popup>
                <div class="card post-tile-card">

                    <a :href="coordinate.url">
                        <img :src="coordinate.thumbnail" class="card-img-top popup-image    ">
                    </a>

                    <div class="card-body">
                        <a :href="coordinate.url">
                            <h6 class="card-title popup-title">{{ coordinate.title }}</h6>
                        </a>
                        <p class="card-text post-tile-text">{{ coordinate.excerpt }}</p>
                    </div>
                    <footer class="card-footer d-flex justify-content-end p-0">
                        <a :href="coordinate.url" class="btn btn-primary btn-sm">Read More</a>
                    </footer>
                </div>


            </l-popup>
        </l-marker>

        <l-control position="bottomright">

            <div v-if="coordinates.length" class="category-list">
                <a class="category-list-header" data-toggle="collapse" href="#categories">
                    <img class="category-list-header-image" src="/wp-content/uploads/migrate/VS-Favicon.png">
                    <p>Filter by category</p>
                    <h5 v-on:click="showMenu = !showMenu" class="ml-2 mb-0 text-primary">
                        <i class="fas fa-angle-down collapse-icon"></i>
                    </h5>
                </a>

                <div id="categories" class="collapse show">
                    <button v-on:click="selectCategory(category)" v-for="(category) in categories"
                        v-bind:class="[{ selected: category.cat_ID === selectedCategory }, 'category'] "
                        :style="getCategoryStyle(category)">
                        <div class="bullet"></div>
                        {{ category.name }}
                    </button>
                </div>

            </div>
        </l-control>

    </l-map>
</div>

<script>
    renderMap()
</script>